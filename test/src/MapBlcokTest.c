#include <stdio.h>
#include <Windows.h>
#include <conio.h>

#define MapSizeX    15
#define MapSizeY    20

void gotoXY(int x, int y)
{
    COORD Cur;
    Cur.X = x;
    Cur.Y = y;
    SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), Cur);
}

// 5 types of block
// 4 types of rotation for each block
// 4 x 4 for block info
char blockInfo[5][4][4][4] =
{
    {
        // block 0 : square type 
        {
            {2,2,0,0},
            {2,2,0,0},
            {0,0,0,0},
            {0,0,0,0}
        },
        {
            {2,2,0,0},
            {2,2,0,0},
            {0,0,0,0},
            {0,0,0,0}
        },
        {
            {2,2,0,0},
            {2,2,0,0},
            {0,0,0,0},
            {0,0,0,0}
        },
        {
            {2,2,0,0},
            {2,2,0,0},
            {0,0,0,0},
            {0,0,0,0}
        }
    },
    {
        // block 1 : T type 
        {
            {0,2,0,0},
            {2,2,2,0},
            {0,0,0,0},
            {0,0,0,0}
        },
        {
            {2,0,0,0},
            {2,2,0,0},
            {2,0,0,0},
            {0,0,0,0}
        },
        {
            {2,2,2,0},
            {0,2,0,0},
            {0,0,0,0},
            {0,0,0,0},
        },
        {
            {0,2,0,0},
            {2,2,0,0},
            {0,2,0,0},
            {0,0,0,0}
        }
    },
    {
        // block 2 : L type
        {
            {2,0,0,0},
            {2,2,2,0},
            {0,0,0,0},
            {0,0,0,0}
        },
        {
            {2,2,0,0},
            {2,0,0,0},
            {2,0,0,0},
            {0,0,0,0}
        },
        {
            {2,2,2,0},
            {0,0,2,0},
            {0,0,0,0},
            {0,0,0,0},
        },
        {
            {0,2,0,0},
            {0,2,0,0},
            {2,2,0,0},
            {0,0,0,0}
        }
    },
    {
        // block 3 : l type
        {
            {2,0,0,0},
            {2,0,0,0},
            {2,0,0,0},
            {2,0,0,0}           
        },
        {
            {2,2,2,2},
            {0,0,0,0},
            {0,0,0,0},
            {0,0,0,0}
        },
        {
            {0,0,0,2},
            {0,0,0,2},
            {0,0,0,2},
            {0,0,0,2}
        },
        {
            {0,0,0,0},
            {0,0,0,0},
            {0,0,0,0},
            {2,2,2,2}
        }
    },
    {
        // block 4 : z type
        {
            {2,2,0,0},
            {0,2,2,0},
            {0,0,0,0},
            {0,0,0,0}
        },
        {
            {0,2,0,0},
            {2,2,0,0},
            {2,0,0,0},
            {0,0,0,0}
        },
        {
            {2,2,0,0},
            {0,2,2,0},
            {0,0,0,0},
            {0,0,0,0}
        },
        {
            {0,2,0,0},
            {2,2,0,0},
            {2,0,0,0},
            {0,0,0,0}
        }
    }
};

COORD drawStartPoint = {40, 10};

char Map[MapSizeY][MapSizeX] =
{
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},

    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
};

void DrawMap()
{
    for (int dy = 0; dy < MapSizeY; ++dy)
    {
        for (int dx = 0; dx < MapSizeX; ++dx)
        {
            int consoleX = drawStartPoint.X + dx;
            int consoleY = drawStartPoint.Y + dy;

            gotoXY(consoleX, consoleY);

            switch (Map[dy][dx])
            {
                case 0:
                    printf("  ");
                    break;
                case 1:
                    printf("бс");
                    break;
            }
        }
    }
}

int main(void)
{
    return 0;
}